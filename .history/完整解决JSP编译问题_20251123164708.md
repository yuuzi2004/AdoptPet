# 完整解决 JSP 编译问题

## 问题
`ClassNotFoundException: org.apache.jsp.list_jsp` - JSP 文件无法编译

## 完整解决步骤

### 步骤 1：完全清理项目

1. **停止 Tomcat**
   - 在 IDE 中完全停止 Tomcat 服务

2. **清理 Maven 编译缓存**
   ```bash
   mvn clean
   ```

3. **删除 Tomcat work 目录**
   - 找到 Tomcat 安装目录（例如：`E:\apache-tomcat-10.1.45`）
   - 删除整个 `work` 文件夹

4. **删除 Tomcat webapps 中的旧部署**
   - 删除 `webapps/Pet1.0` 文件夹（如果存在）
   - 删除 `webapps/Pet1.0.war`（如果存在）

### 步骤 2：重新构建项目

1. **重新编译项目**
   ```bash
   mvn clean compile
   ```

2. **打包 WAR 文件**
   ```bash
   mvn package
   ```

3. **验证 WAR 文件**
   - 检查 `target/Pet1.0.war` 是否存在
   - 可以用解压软件打开 WAR 文件，确认 `list.jsp` 在根目录

### 步骤 3：重新部署

**方法 A：使用 IDE 部署（推荐）**

1. 在 IDE 中：
   - 右键项目 → Maven → Reload Project
   - 停止 Tomcat
   - 重新部署项目到 Tomcat
   - 启动 Tomcat

**方法 B：手动部署**

1. 复制 `target/Pet1.0.war` 到 Tomcat 的 `webapps` 目录
2. 启动 Tomcat（会自动解压 WAR 文件）

### 步骤 4：验证部署

1. **检查部署目录**
   - 确认 `webapps/Pet1.0/list.jsp` 文件存在

2. **直接访问 JSP**
   - 访问：`http://localhost:8080/Pet1.0/list.jsp`
   - 如果能访问，说明 JSP 文件部署成功

3. **访问 Servlet**
   - 访问：`http://localhost:8080/Pet1.0/pet/list`
   - 应该能正常显示页面

## 如果还是不行

### 检查点 1：JSP 文件编码
确保 JSP 文件是 UTF-8 编码，没有 BOM

### 检查点 2：JSTL 依赖
确认 `pom.xml` 中有 JSTL 依赖，并且 WAR 包的 `WEB-INF/lib` 中有 JSTL jar 文件

### 检查点 3：Tomcat 日志
查看 `catalina.out` 或控制台日志，看是否有 JSP 编译错误信息

### 检查点 4：直接访问 JSP
尝试直接访问 `http://localhost:8080/Pet1.0/list.jsp`，看是否能编译

## 常见问题

**Q: 为什么清理 work 目录后还是不行？**
A: 可能是因为 JSP 文件根本没有被部署到 Tomcat，需要重新打包和部署。

**Q: 如何确认 JSP 文件被正确部署？**
A: 检查 `webapps/Pet1.0/list.jsp` 文件是否存在，或者直接访问 JSP URL。

**Q: Maven 打包时 JSP 文件会被包含吗？**
A: 是的，Maven WAR 插件会自动包含 `src/main/webapp` 下的所有文件。

